---
import { siteConfig } from "../config";
// Filter out projects with empty names
const projects = siteConfig.projects?.filter(p => p.name && p.name.length > 0) || [];
const hasProjects = projects.length > 0;
---

{
  hasProjects && (
    <section id="projects" class="p-8 sm:p-12 md:p-16 lg:p-24">
      <div>
        <div class="grid grid-cols-1 2xl:grid-cols-12 gap-12 2xl:gap-[clamp(2rem,5vw,4rem)] items-start">
          <div class="2xl:col-span-4">
            <h2 class="text-3xl sm:text-4xl md:text-5xl xl:text-7xl font-bold text-text-primary">
              Projects
            </h2>
            <div
              class="w-[75px] h-[5px] mt-2 rounded-full"
              style={`background-color: ${siteConfig.accentColor}`}
            />
          </div>

          <div class="2xl:col-span-8 mt-4 2xl:mt-0">
            <div class="space-y-8">
              {projects.map((project) => {
                const hasGithub = project.github && project.github.length > 0;
                const hasArticles = project.articles && project.articles.length > 0;
                const hasLinks = hasGithub || hasArticles;

                return (
                  <div class="block relative p-4 sm:p-6 md:p-8 bg-surface rounded-xl sm:rounded-2xl border border-border hover:bg-background hover:shadow-xl hover:border-text-muted transition-all duration-300">
                    <div class="space-y-4">
                      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                        <h3 class="text-xl sm:text-2xl font-bold text-text-primary">
                          {project.name}
                        </h3>
                        {project.dateRange && (
                          <span class="text-xs sm:text-sm text-text-muted mt-1 sm:mt-0">
                            {project.dateRange}
                          </span>
                        )}
                      </div>

                      <p class="text-base sm:text-lg text-text-secondary leading-relaxed whitespace-pre-line">
                        {project.description}
                      </p>

                      {hasLinks && (
                        <div class="flex flex-wrap items-center gap-x-4 gap-y-2">
                          {hasGithub && (
                            <a
                              href={project.github}
                              target="_blank"
                              rel="noopener noreferrer"
                              class="inline-flex items-center gap-1.5 text-sm sm:text-base font-medium transition-colors duration-200 hover:underline"
                              style={{ color: siteConfig.accentColor }}
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="18"
                                height="18"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="w-4 h-4 sm:w-5 sm:h-5"
                              >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
                              </svg>
                              GitHub
                            </a>
                          )}
                          {hasArticles && project.articles.map((article) => (
                            <a
                              href={article.link}
                              target="_blank"
                              rel="noopener noreferrer"
                              class="inline-flex items-center gap-1.5 text-sm sm:text-base font-medium transition-colors duration-200 hover:underline"
                              style={{ color: siteConfig.accentColor }}
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="18"
                                height="18"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="w-4 h-4 sm:w-5 sm:h-5"
                              >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" />
                                <path d="M8 9h1l3 3l3 -3h1" />
                                <path d="M8 15l2 0" />
                                <path d="M14 15l2 0" />
                                <path d="M9 9l0 6" />
                                <path d="M15 9l0 6" />
                              </svg>
                              {article.title}
                            </a>
                          ))}
                        </div>
                      )}

                      {project.skills && project.skills.length > 0 && (
                        <div class="flex flex-wrap gap-1.5 sm:gap-2 pt-2">
                          {project.skills.map((skill) => (
                            <span class="px-2.5 sm:px-3 py-1 sm:py-1.5 bg-text-primary text-text-inverse rounded-md sm:rounded-lg text-xs sm:text-sm font-medium">
                              {skill}
                            </span>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                );
              })}
            </div>
          </div>
        </div>
      </div>
    </section>
  )
}
